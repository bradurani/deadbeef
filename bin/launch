#!/usr/bin/env bash

set -euo pipefail

LOG_FILE=/Users/bradurani/src/deadbeef/log/out.log
ERROR_LOG_FILE=/Users/bradurani/src/deadbeef/log/error.log
IN_LOG_FILE=/Users/bradurani/src/deadbeef/log/in.log

touch $LOG_FILE
touch $ERROR_LOG_FILE
touch $IN_LOG_FILE

export LOG_LEVEL=${LOG_LEVEL:-debug}
export PRINT_TREE=${PRINT_TREE:-true}
export MAX_TREE_DISPLAY_DEPTH=${MAX_TREE_DISPLAY_DEPTH:-3}
export MAX_TREE_DISPLAY_LENGTH=${MAX_TREE_DISPLAY_LENGTH:-3}


tee $IN_LOG_FILE | /Users/bradurani/.cargo/bin/cargo run --release 2>$ERROR_LOG_FILE | tee $LOG_FILE
